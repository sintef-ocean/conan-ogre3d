From d5a6ad386a2959ec1ff32293e96c5ebdb643ff99 Mon Sep 17 00:00:00 2001
From: Joakim Haugen <joakim.haugen@gmail.com>
Date: Thu, 12 May 2022 11:24:47 +0200
Subject: [PATCH] Work on ImGui context exposure

---
 Components/Overlay/include/OgreImGuiOverlay.h |  2 ++
 Components/Overlay/src/OgreImGuiOverlay.cpp   | 11 +++++++++++
 2 files changed, 13 insertions(+)

diff --git a/Components/Overlay/include/OgreImGuiOverlay.h b/Components/Overlay/include/OgreImGuiOverlay.h
index 07b761290..4b118bd3a 100644
--- a/Components/Overlay/include/OgreImGuiOverlay.h
+++ b/Components/Overlay/include/OgreImGuiOverlay.h
@@ -26,6 +26,8 @@ public:
     static void NewFrame();
 
     void _findVisibleObjects(Camera* cam, RenderQueue* queue, Viewport* vp);
+    ImGuiContext* GetCurrentContext();
+    void GetAllocatorFunctions(ImGuiMemAllocFunc* p_alloc_func, ImGuiMemFreeFunc* p_free_func, void** p_user_data);
 
 private:
     void initialise();
diff --git a/Components/Overlay/src/OgreImGuiOverlay.cpp b/Components/Overlay/src/OgreImGuiOverlay.cpp
index 108310781..bd56e54ad 100644
--- a/Components/Overlay/src/OgreImGuiOverlay.cpp
+++ b/Components/Overlay/src/OgreImGuiOverlay.cpp
@@ -55,6 +55,17 @@ void ImGuiOverlay::_findVisibleObjects(Camera* cam, RenderQueue* queue, Viewport
     mRenderable._update();
     queue->addRenderable(&mRenderable, RENDER_QUEUE_OVERLAY, mZOrder * 100);
 }
+
+ImGuiContext* ImGuiOverlay::GetCurrentContext()
+{
+    return ImGui::GetCurrentContext();
+}
+
+void ImGuiOverlay::GetAllocatorFunctions(ImGuiMemAllocFunc* p_alloc_func, ImGuiMemFreeFunc* p_free_func, void** p_user_data)
+{
+    ImGui::GetAllocatorFunctions(p_alloc_func, p_free_func, p_user_data);
+}
+
 //-----------------------------------------------------------------------------------
 void ImGuiOverlay::ImGUIRenderable::createMaterial()
 {
-- 
2.25.1

